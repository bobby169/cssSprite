/*!
 * DATE: 2018-01-25
 * @author: bobby169
 * 115393304
 * (c) bobby169
 */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function i(t){var i=this;this.options=Object.assign({target:"body",images:null,frames:{},animations:null,fps:30,paused:!1,change:!1,animationend:!1},t),this.target=document.querySelector(this.options.target),this.renderType="backgroundPosition",this._frameIndex=0,this._frameWidth=0,this._frameHeight=0,this._frames=[],this._spacing=0,this._margin=0,this.currentFrame=0;var e=function(t){return"function"==typeof t||!(!t||"object"!=(void 0===t?"undefined":_typeof(t)))};if(e(this.options.frames)&&!this.options.frames.width&&(this.options.frames.width=this.target.clientWidth),e(this.options.frames)&&!this.options.frames.height&&(this.options.frames.height=this.target.clientHeight),Array.isArray(this.options.images)&&this.options.images.length)this.totalFrames=this.options.images.length,this.options.images.forEach(function(t,e){t.tagName&&"IMG"===t.tagName?(0!==e&&(t.style.display="none"),i.target.appendChild(t),i.renderType="img"):i.renderType="backgroundImage"}),i.options.paused||i._tick();else if(Array.isArray(this.options.frames)&&this.options.frames.length){this.totalFrames=this.options.frames.length;for(var s=0;s<this.totalFrames;s++){var n=this.options.frames[s][0],o=this.options.frames[s][1],r=this.options.frames[s][2]?this.options.frames[s][2]:this.target.clientWidth,a=this.options.frames[s][3]?this.options.frames[s][3]:this.target.clientHeight;this._frames.push({x:n,y:o,width:r,height:a})}i.options.paused||i._tick()}else if(this.options.frames.width&&this.options.frames.height){this._frameWidth=this.options.frames.width,this._frameHeight=this.options.frames.height,this._spacing=this.options.spacing||0,this._margin=this.options.margin||0,this.totalFrames=this.options.frames.count;var h=0,r=this._frameWidth,a=this._frameHeight,m=this._spacing,f=this._margin,p=this.totalFrames;this._loadImage(function(t,e){for(var s=t,n=e,o=f;o<=n-f-a;){for(var c=f;c<=s-f-r&&!(h>=p);)h++,i._frames.push({x:c,y:o,width:r,height:a}),c+=r+m;o+=a+m}void 0===this.totalFrames&&(i.totalFrames=h),i.options.paused||i._tick()})}else i.options.paused||i._tick()}"function"==typeof define&&define.amd?define([],function(){return i}):"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=i:void 0!==t&&(t.CssSprite=i,t.hb=t.hb||{},t.hb.CssSprite=i),i.prototype={_getCss:function(t,i){return t.style[function(t){return t.replace(/-+(.)?/g,function(t,i){return i?i.toUpperCase():""})}(i)]||getComputedStyle(t,"").getPropertyValue(i)},_loadImage:function(t){var i;"string"==typeof this.options.images?(i=this.options.images,this.target.style.backgroundImage="url("+i+")"):i=this._getCss(this.target,"background-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2");var e=new Image;e.onload=function(){var i=e.width,s=e.height;t(i,s)},e.src=i},_getFrameIndex:function(){return this._frameIndex},_setFrameIndex:function(t){var i=this.options.animations?this.currentAnimation.length:this.totalFrames;t=t>i-1?0:t,t=t<0?i-1:t,this._frameIndex=t},_animation:function(){var t=function(t,i){return t++,t>=i?this.currentAnimation&&this.currentAnimation.next?(t=0,this.currentAnimation=this.options.animations[this.currentAnimation.next],this._tick()):"function"==typeof this.options.animationend&&this.options.animationend.call(this):this._tick(),t};if(this.options.animations){if(void 0===this.currentAnimation)for(var i in this.options.animations){this.currentAnimation=this.options.animations[i];break}Array.isArray(this.currentAnimation)?(this.frame(this.currentAnimation[this._frameIndex]),this._frameIndex=t.call(this,this._frameIndex,this.currentAnimation.length)):this.currentAnimation.frames&&this.currentAnimation.frames.length&&(this.frame(this.currentAnimation.frames[this._frameIndex]),this._frameIndex=t.call(this,this._frameIndex,this.currentAnimation.frames.length))}else this.frame(this._frameIndex),this._frameIndex=t.call(this,this._frameIndex,this.totalFrames)},_tick:function(){var t=this,i=1e3/this.options.fps;this.currentAnimation&&this.currentAnimation.speed&&(i/=this.currentAnimation.speed),void 0!==this.options.duration&&(i=this.options.duration/this.totalFrames),this._interval&&clearTimeout(this._interval),this._interval=setTimeout(function(){t._animation()},i)},_goto:function(t){this.stop(),"string"==typeof t?(this.options.animations[t]!==this.currentAnimation&&(this._frameIndex=0,this.currentAnimation=this.options.animations[t],this.currentAnimationName=t),this._tick()):"number"==typeof t?(this._frameIndex=t,this._tick()):void 0===t&&(this._frameIndex=0,this._tick())},frame:function(t){var i=this.target;(void 0===t||isNaN(t))&&(t=this.currentFrame),"backgroundImage"===this.renderType?i.style.backgroundImage=this.options.images[t].img?"url("+this.options.images[t].img+")":"url("+this.options.images[t]+")":"img"===this.renderType?this.options.images.forEach(function(i,e){i.style.display=e===t?"inline-block":"none"}):(i.style.backgroundPosition=-this._frames[t].x+"px "+-this._frames[t].y+"px",i.style.width=this._frames[t].width+"px",i.style.height=this._frames[t].height+"px"),this.currentFrame=t,"function"==typeof this.options.change&&this.options.change.apply(this,[t,this._frameIndex])},gotoAndPlay:function(t){this._goto(t)},gotoAndStop:function(t){this.stop(),void 0===t&&(t=this._frameIndex),"string"==typeof t?(this._frameIndex=0,this.currentAnimation=this.options.animations[t],this.currentAnimationName=t,this.frame(this.currentAnimation[this._frameIndex])):this.options.animations?this.frame(this.currentAnimation[t]):(this._frameIndex=t,this.frame(this._frameIndex))},play:function(t){this._goto(t)},stop:function(){clearTimeout(this._interval)},fps:function(t){this.options.fps=t}};try{Object.defineProperties(i.prototype,{frameIndex:{set:i.prototype._setFrameIndex,get:i.prototype._getFrameIndex}})}catch(t){}i.createAnimations=function(t,i){for(var e=[];i-t>=0;)e.push(t),t++;return e}}(void 0);