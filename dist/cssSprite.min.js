!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).CssSprite=i()}(this,function(){"use strict";function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}
/*!
   * DATE: 2018-01-25
   * @author: hebo
   * 115393304
   * (c) bobby169
   * https://github.com/bobby169/cssSprite
   */
var t=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),this.options=Object.assign({target:"body",images:null,frames:null,animations:null,fps:30,paused:!1,frameIndex:0,loop:-1,change:!1,animationend:!1},t),console.info(this.options),this._initialize()}var t,e,s;return t=i,(e=[{key:"_initialize",value:function(){var t,a=this,i=function(t){return"function"==typeof t||!(!t||"object"!==l(t))};if(this.target=(t=this.options.target)&&1===t.nodeType?this.options.target:document.querySelector(this.options.target),this.renderType="backgroundPosition",this._frameIndex=this.options.frameIndex,this._frameWidth=0,this._frameHeight=0,this._frames=[],this._spacing=0,this._margin=0,this._loopIndex=0,this.currentFrame=0,this._paused=this.options.paused,this.options.frames||(this.options.frames=Object.create(null)),0===this.options.loop&&(this._paused=!0),this.options.frames.width&&(this.options.frames.width=Number(this.options.frames.width),this.target.style.width="".concat(this.options.frames.width,"px")),this.options.frames.height&&(this.options.frames.height=Number(this.options.frames.height),this.target.style.height="".concat(this.options.frames.height,"px")),this.options.frames.count&&(this.options.frames.count=Number(this.options.frames.count)),i(this.options.frames)&&!this.options.frames.width&&(this.options.frames.width=this.target.clientWidth),i(this.options.frames)&&!this.options.frames.height&&(this.options.frames.height=this.target.clientHeight),Array.isArray(this.options.images)&&this.options.images.length)this.totalFrames=this.options.images.length,this.options.images.forEach(function(t,i){t.tagName&&"IMG"===t.tagName?(0===i&&(a._currentAppendChild=a.target.appendChild(t)),a.renderType="img"):a.renderType="backgroundImage"}),this._toTick();else if(Array.isArray(this.options.frames)&&this.options.frames.length){this.totalFrames=this.options.frames.length;for(var e=0;e<this.totalFrames;e++){var s=this.options.frames[e][0],n=this.options.frames[e][1],o=this.options.frames[e][2]?this.options.frames[e][2]:this.target.clientWidth,r=this.options.frames[e][3]?this.options.frames[e][3]:this.target.clientHeight;this._frames.push({x:s,y:n,width:o,height:r})}this._toTick()}else if(null!==this.options.frames.width&&null!==this.options.frames.height){if(this._frameWidth=this.options.frames.width,this._frameHeight=this.options.frames.height,this._spacing=this.options.spacing||0,this._margin=this.options.margin||0,this.totalFrames=this.options.frames.count,!this.totalFrames)throw new Error("totalFrames must set number and greater than 0");var h=0,m=this._frameWidth,p=this._frameHeight,f=this._spacing,u=this._margin,c=this.totalFrames;this._loadImage(function(t,i){for(var e=t,s=i,n=u;n<=s-u-p;){for(var o=u;o<=e-u-m&&!(c<=h);)h++,a._frames.push({x:o,y:n,width:m,height:p}),o+=m+f;n+=p+f}void 0===a.totalFrames&&(a.totalFrames=h),a._toTick()})}}},{key:"_toTick",value:function(){this._paused?this.frame(0):this._tick()}},{key:"_getCss",value:function(t,i){var e;return t.style[(e=i,e.replace(/-+(.)?/g,function(t,i){return i?i.toUpperCase():""}))]||getComputedStyle(t,"").getPropertyValue(i)}},{key:"_loadImage",value:function(e){var t;"string"==typeof this.options.images?(t=this.options.images,this.target.style.backgroundImage="url(".concat(t,")")):t=this._getCss(this.target,"background-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2");var s=new Image;s.onload=function(){var t=s.width,i=s.height;e(t,i)},s.src=t}},{key:"_getFrameIndex",value:function(){return this._frameIndex}},{key:"_setFrameIndex",value:function(t){var i=this.options.animations?this.currentAnimation.length:this.totalFrames;t=(t=i-1<t?0:t)<0?i-1:t,this._frameIndex=t}},{key:"_checkLoop",value:function(t,i){return i<=++t?this.currentAnimation&&this.currentAnimation.next?(t=0,this.currentAnimation=this.options.animations[this.currentAnimation.next],this._tick()):-1===this.options.loop?(t=0,this._tick()):0<this.options.loop&&this._loopIndex<this.options.loop-1?(t=0,this._loopIndex++,this._tick()):"function"==typeof this.options.animationend&&this.options.animationend.call(this):this._tick(),t}},{key:"_animation",value:function(){if(this.options.animations){if(void 0===this.currentAnimation)for(var t in this.options.animations){this.currentAnimation=this.options.animations[t];break}Array.isArray(this.currentAnimation)?(this.frame(this.currentAnimation[this._frameIndex]),this._frameIndex=this._checkLoop(this._frameIndex,this.currentAnimation.length)):this.currentAnimation.frames&&this.currentAnimation.frames.length&&(this.frame(this.currentAnimation.frames[this._frameIndex]),this._frameIndex=this._checkLoop(this._frameIndex,this.currentAnimation.frames.length))}else this.frame(this._frameIndex),this._frameIndex=this._checkLoop(this._frameIndex,this.totalFrames)}},{key:"_tick",value:function(){var t=this,i=1e3/this.options.fps;this.currentAnimation&&this.currentAnimation.speed&&(i/=this.currentAnimation.speed),void 0!==this.options.duration&&(i=this.options.duration/this.totalFrames),this._interval&&clearTimeout(this._interval),this._interval=setTimeout(function(){t._animation()},i)}},{key:"_goto",value:function(t){this.stop(),this._loopIndex=0,"string"==typeof t?(this.options.animations[t]!==this.currentAnimation&&(this._frameIndex=0,this.currentAnimation=this.options.animations[t],this.currentAnimationName=t),this._tick()):"number"==typeof t?(this._frameIndex=t,this._tick()):void 0===t&&(this._frameIndex=0,this._tick())}},{key:"_setPaused",value:function(t){this._paused=t,this._paused?this.stop():this.play()}},{key:"frame",value:function(t){var i=this.target;(void 0===t||isNaN(t))&&(t=this.currentFrame),"backgroundImage"===this.renderType?i.style.backgroundImage=this.options.images[t].img?"url(".concat(this.options.images[t].img,")"):"url(".concat(this.options.images[t],")"):"img"===this.renderType?(this._currentAppendChild&&i.removeChild(this._currentAppendChild),this._currentAppendChild=i.appendChild(this.options.images[t])):("string"==typeof this.options.images&&""!==this.options.images&&(i.style.backgroundImage="url(".concat(this.options.images,")")),i.style.backgroundPosition=-this._frames[t].x+"px "+-this._frames[t].y+"px",i.style.width="".concat(this._frames[t].width,"px"),i.style.height="".concat(this._frames[t].height,"px")),this.currentFrame=t,"function"==typeof this.options.change&&this.options.change.apply(this,[t,this._frameIndex])}},{key:"gotoAndPlay",value:function(t){this._goto(t)}},{key:"gotoAndStop",value:function(t){this.stop(),void 0===t&&(t=this._frameIndex),"string"==typeof t?(this._frameIndex=0,this.currentAnimation=this.options.animations[t],this.currentAnimationName=t,this.frame(this.currentAnimation[this._frameIndex])):this.options.animations?this.frame(this.currentAnimation[t]):(this._frameIndex=t,this.frame(this._frameIndex))}},{key:"play",value:function(t){this._goto(t)}},{key:"stop",value:function(){clearTimeout(this._interval)}},{key:"fps",value:function(t){this.options.fps=t}}])&&n(t.prototype,e),s&&n(t,s),i}();try{Object.defineProperties(t.prototype,{frameIndex:{set:t.prototype._setFrameIndex,get:t.prototype._getFrameIndex},paused:{set:t.prototype._setPaused,get:t.prototype._paused}})}catch(t){}return t.createAnimations=function(t,i){for(var e=[];0<=i-t;)e.push(t),t++;return e},t});
